Return-Path: <linux-pci-owner@vger.kernel.org>
X-Original-To: lists+linux-pci@lfdr.de
Delivered-To: lists+linux-pci@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 5CAAD265C5
	for <lists+linux-pci@lfdr.de>; Wed, 22 May 2019 16:31:25 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1729471AbfEVObS (ORCPT <rfc822;lists+linux-pci@lfdr.de>);
        Wed, 22 May 2019 10:31:18 -0400
Received: from mail-oln040092255048.outbound.protection.outlook.com ([40.92.255.48]:8931
        "EHLO APC01-HK2-obe.outbound.protection.outlook.com"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S1728835AbfEVObS (ORCPT <rfc822;linux-pci@vger.kernel.org>);
        Wed, 22 May 2019 10:31:18 -0400
Received: from HK2APC01FT049.eop-APC01.prod.protection.outlook.com
 (10.152.248.59) by HK2APC01HT023.eop-APC01.prod.protection.outlook.com
 (10.152.249.142) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id 15.20.1900.16; Wed, 22 May
 2019 14:31:11 +0000
Received: from PS2P216MB0642.KORP216.PROD.OUTLOOK.COM (10.152.248.53) by
 HK2APC01FT049.mail.protection.outlook.com (10.152.249.218) with Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id
 15.20.1922.16 via Frontend Transport; Wed, 22 May 2019 14:31:11 +0000
Received: from PS2P216MB0642.KORP216.PROD.OUTLOOK.COM
 ([fe80::1c5e:7ea0:b90c:65c9]) by PS2P216MB0642.KORP216.PROD.OUTLOOK.COM
 ([fe80::1c5e:7ea0:b90c:65c9%10]) with mapi id 15.20.1922.016; Wed, 22 May
 2019 14:31:11 +0000
From:   Nicholas Johnson <nicholas.johnson-opensource@outlook.com.au>
To:     "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>
CC:     "linux-pci@vger.kernel.org" <linux-pci@vger.kernel.org>,
        "bhelgaas@google.com" <bhelgaas@google.com>,
        "mika.westerberg@linux.intel.com" <mika.westerberg@linux.intel.com>,
        "corbet@lwn.net" <corbet@lwn.net>,
        Nicholas Johnson <nicholas.johnson-opensource@outlook.com.au>
Subject: [PATCH v6 3/4] PCI: Fix bug resulting in double hpmemsize being
 assigned to MMIO window
Thread-Topic: [PATCH v6 3/4] PCI: Fix bug resulting in double hpmemsize being
 assigned to MMIO window
Thread-Index: AQHVEKsAhMcuxcifSUWwjbAdzRxIBw==
Date:   Wed, 22 May 2019 14:31:11 +0000
Message-ID: <PS2P216MB0642EEC485C82AF74AEEB89280000@PS2P216MB0642.KORP216.PROD.OUTLOOK.COM>
References: <20190522222928.2964-1-nicholas.johnson-opensource@outlook.com.au>
In-Reply-To: <20190522222928.2964-1-nicholas.johnson-opensource@outlook.com.au>
Accept-Language: en-AU, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: SYBPR01CA0017.ausprd01.prod.outlook.com (2603:10c6:10::29)
 To PS2P216MB0642.KORP216.PROD.OUTLOOK.COM (2603:1096:300:1c::16)
x-incomingtopheadermarker: OriginalChecksum:A3BF70338224C9F78FAF69B51F58D475ACCB1CE9984241A780134E3BD4621F53;UpperCasedChecksum:BC87D8C032667453E8BEF6058CEC6CDCB5818BF70E8235A8A67DA52BA9CC21B6;SizeAsReceived:7903;Count:50
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.19.1
x-tmn:  [qF877ri9MeBJPWMFZGJIgeN2XGdtbu3uJFb2mgp4eIZQe3RRQvfNK9YyuuqFzaPU6bWbcxVDKec=]
x-microsoft-original-message-id: <20190522222928.2964-4-nicholas.johnson-opensource@outlook.com.au>
x-ms-publictraffictype: Email
x-incomingheadercount: 50
x-eopattributedmessage: 0
x-ms-exchange-slblob-mailprops: inBjZRGSCZlLxRoZX+b2aZrkZpb++rBSk3dhAeQuM+AqVfYpfycuKhwT/rQlZ5EuiUcX4clSwvmSFaXV5JbqrK2388cybQHFKZnC6lXNCAkaDgk2LrrUVK5aztbzFych41geZ/+M3bLT2UlBTPV9KNwJbtj8cBk1mLicE8DfpoGAZ6p3jr6yQjsW8pglh8u33/tG+XndjegQBHEggRH2aWbvGEtilghLYl3kypsZbeLKrtmb7wvV2bTNF0aOo44y1IkCk8Zo36piCrUus7TAB7JqJfepUB6JnrbH+2pPsNZRgF/m07zKFAo/CfigGPSviFDCvVaxTrmk3vq7XQ8l4VvWgqQlXlFqSNifpDm+rpCfwEeVCCXdQNIh4R1cKTc/5cFpP5OZuWchasnBd7Eoe7BMKkni9ib+G3lJMLGkxfNhYaOqsOD204Hz52h0NG2DoSURjpfNp2lvOiUnHqO4CLvAbbf3oPiZmcMQv415IPntbTAbmDoQKVC8NreCjtOuZO2VOMY0TSNMthTmuwgbJMNzekiuV3IehaMG+xVEfbNTlV38cI5IwVRKkrdottqLyL40+PnWFFgE/qCL/PHyXa+akVnndnrpOAZp99VpaCj/jfw/Yn9eHzYc5dWag9RF+l069gixo6rdV2UvJk2RoV4ESFq6NBRsNG+kCCP21ioRENIwDO3wrAb7SHirFiO3v5yCdQ9AjV/ZaoP8MXp9Eh5GBlR/VDDLDqcJ97p4aRXcVgfeTbscj8A76GUl3fNnQmsc21WOVR94iYP2y5G+mLkodLr3m/QzYAnhaBv/RA2e5gKBPr7QYqAFzk3UZVqmWHIFpPfCMW0IA0VOWUssgSRnFDi7+mzW21BRDXTbC57518dCpwY8fog4IP/jZvs/HTd60cKzpz8u0Ujh/Xgm4XOvjMlA+2nBl7QKBn57OlJHr4EQVWMKxhVL8WzqYd2dHBrekK8nSImBSZDxD/aNZA==
x-microsoft-antispam: BCL:0;PCL:0;RULEID:(2390118)(5050001)(7020095)(20181119110)(201702061078)(5061506573)(5061507331)(1603103135)(2017031320274)(201702181274)(2017031323274)(2017031324274)(2017031322404)(1601125500)(1603101475)(1701031045);SRVR:HK2APC01HT023;
x-ms-traffictypediagnostic: HK2APC01HT023:
x-ms-exchange-purlcount: 1
x-microsoft-antispam-message-info: D0jMsHpww4Cn5hpw+IEs3C8Q6YZb3EYXkEb+sQ0GUXheGRbgh3dHwAPWPNUEyWjFlXWF/RcDNEq+xU5QVJMTO7h52a579WnBHOByXInC5HU4bBvx0zOtNTpDMGQS/6BUedZ+h2t/MA0e5VdlSZG8QCHxVKRbYDDzp+cEK5mzre0tICkd5IWHl/XHiZrIzJ+B
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: outlook.com
X-MS-Exchange-CrossTenant-RMS-PersistedConsumerOrg: 00000000-0000-0000-0000-000000000000
X-MS-Exchange-CrossTenant-Network-Message-Id: e9d71dd2-6d6e-4be8-d3ff-08d6dec22333
X-MS-Exchange-CrossTenant-rms-persistedconsumerorg: 00000000-0000-0000-0000-000000000000
X-MS-Exchange-CrossTenant-originalarrivaltime: 22 May 2019 14:31:11.8077
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Internet
X-MS-Exchange-CrossTenant-id: 84df9e7f-e9f6-40af-b435-aaaaaaaaaaaa
X-MS-Exchange-Transport-CrossTenantHeadersStamped: HK2APC01HT023
Sender: linux-pci-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-pci.vger.kernel.org>
X-Mailing-List: linux-pci@vger.kernel.org

QmFja2dyb3VuZA0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCg0KU29sdmUgYnVnIHJlcG9ydDoNCmh0dHBz
Oi8vYnVnemlsbGEua2VybmVsLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjAzMjQzDQoNCkN1cnJlbnRs
eSwgdGhlIGtlcm5lbCBjYW4gc29tZXRpbWVzIGFzc2lnbiB0aGUgTU1JT19QUkVGIHdpbmRvdw0K
YWRkaXRpb25hbCBzaXplIGludG8gdGhlIE1NSU8gd2luZG93LCByZXN1bHRpbmcgaW4gZG91Ymxl
IHRoZSBNTUlPDQphZGRpdGlvbmFsIHNpemUsIGV2ZW4gaWYgdGhlIE1NSU9fUFJFRiB3aW5kb3cg
d2FzIHN1Y2Nlc3NmdWwuDQoNClRoaXMgaGFwcGVucyBpZiBpbiB0aGUgZmlyc3QgcGFzcywgdGhl
IE1NSU9fUFJFRiBzdWNjZWVkcyBidXQgdGhlIE1NSU8NCmZhaWxzLiBJbiB0aGUgbmV4dCBwYXNz
LCBiZWNhdXNlIE1NSU9fUFJFRiBpcyBhbHJlYWR5IGFzc2lnbmVkLCB0aGUNCmF0dGVtcHQgdG8g
YXNzaWduIE1NSU9fUFJFRiByZXR1cm5zIGFuIGVycm9yIGNvZGUgaW5zdGVhZCBvZiBzdWNjZXNz
DQoobm90aGluZyBtb3JlIHRvIGRvLCBhbHJlYWR5IGFsbG9jYXRlZCkuDQoNCkV4YW1wbGUgb2Yg
cHJvYmxlbSAobW9yZSBjb250ZXh0IGNhbiBiZSBmb3VuZCBpbiB0aGUgYnVnIHJlcG9ydCBVUkwp
Og0KDQpNYWlubGluZSBrZXJuZWw6DQpwY2kgMDAwMDowNjowMS4wOiBCQVIgMTQ6IGFzc2lnbmVk
IFttZW0gMHg5MDEwMDAwMC0weGEwMGZmZmZmXSA9IDI1Nk0NCnBjaSAwMDAwOjA2OjA0LjA6IEJB
UiAxNDogYXNzaWduZWQgW21lbSAweGEwMjAwMDAwLTB4YjAxZmZmZmZdID0gMjU2TQ0KDQpQYXRj
aGVkIGtlcm5lbDoNCnBjaSAwMDAwOjA2OjAxLjA6IEJBUiAxNDogYXNzaWduZWQgW21lbSAweDkw
MTAwMDAwLTB4OTgwZmZmZmZdID0gMTI4TQ0KcGNpIDAwMDA6MDY6MDQuMDogQkFSIDE0OiBhc3Np
Z25lZCBbbWVtIDB4OTgyMDAwMDAtMHhhMDFmZmZmZl0gPSAxMjhNDQoNClRoaXMgd2FzIHVzaW5n
IHBjaT1yZWFsbG9jLGhwbWVtc2l6ZT0xMjhNLG5vY3JzIC0gb24gdGhlIHNhbWUgbWFjaGluZQ0K
d2l0aCB0aGUgc2FtZSBjb25maWd1cmF0aW9uLCB3aXRoIGEgVWJ1bnR1IG1haW5saW5lIGtlcm5l
bCBhbmQgYSBrZXJuZWwNCnBhdGNoZWQgd2l0aCB0aGlzIHBhdGNoIHNlcmllcy4NCg0KVGhpcyBw
YXRjaCBpcyB2aXRhbCBmb3IgdGhlIG5leHQgcGF0Y2ggaW4gdGhlIHNlcmllcy4gVGhlIG5leHQg
cGF0Y2gNCmFsbG93cyB0aGUgdXNlciB0byBzcGVjaWZ5IE1NSU8gYW5kIE1NSU9fUFJFRiBpbmRl
cGVuZGVudGx5LiBJZiB0aGUNCk1NSU9fUFJFRiBpcyBzZXQgdG8gYmUgdmVyeSBsYXJnZSwgdGhp
cyBidWcgd2lsbCBlbmQgdXAgbW9yZSB0aGFuDQpkb3VibGluZyB0aGUgTU1JTyBzaXplLiBUaGUg
YnVnIHJlc3VsdHMgaW4gdGhlIE1NSU9fUFJFRiBiZWluZyBhZGRlZCB0bw0KdGhlIE1NSU8gd2lu
ZG93LCB3aGljaCBtZWFucyBkb3VibGluZyBpZiBNTUlPX1BSRUYgc2l6ZSA9PSBNTUlPIHNpemUu
DQpXaXRoIGEgbGFyZ2UgTU1JT19QUkVGLCB3aXRob3V0IHRoaXMgcGF0Y2gsIHRoZSBNTUlPIHdp
bmRvdyB3aWxsIGxpa2VseQ0KZmFpbCB0byBiZSBhc3NpZ25lZCBhbHRvZ2V0aGVyIGR1ZSB0byBs
YWNrIG9mIDMyLWJpdCBhZGRyZXNzIHNwYWNlLg0KDQpQYXRjaCBub3Rlcw0KPT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT0NCg0KQ2hhbmdlIGZpbmRfZnJlZV9idXNfcmVzb3VyY2UoKSB0byBub3Qgc2tpcCBhc3Np
Z25lZCByZXNvdXJjZXMgd2l0aA0Kbm9uLW51bGwgcGFyZW50Lg0KDQpBZGQgY2hlY2tzIGluIHBi
dXNfc2l6ZV9pbygpIGFuZCBwYnVzX3NpemVfbWVtKCkgdG8gcmV0dXJuIHN1Y2Nlc3MgaWYNCnJl
c291cmNlIHJldHVybmVkIGZyb20gZmluZF9mcmVlX2J1c19yZXNvdXJjZSgpIGlzIGFscmVhZHkg
YWxsb2NhdGVkLg0KDQpUaGlzIGF2b2lkcyBwYnVzX3NpemVfaW8oKSBhbmQgcGJ1c19zaXplX21l
bSgpIHJldHVybmluZyBlcnJvciBjb2RlIHRvDQpfX3BjaV9idXNfc2l6ZV9icmlkZ2VzKCkgd2hl
biBhIHJlc291cmNlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBhc3NpZ25lZA0KaW4gYSBwcmV2aW91
cyBwYXNzLiBUaGlzIGZpeGVzIHRoZSBleGlzdGluZyBiZWhhdmlvdXIgd2hlcmUgc3BhY2UgZm9y
IGENCnJlc291cmNlIGNvdWxkIGJlIHJlc2VydmVkIG11bHRpcGxlIHRpbWVzIGluIGRpZmZlcmVu
dCBwYXJlbnQgYnJpZGdlDQp3aW5kb3dzLiBUaGlzIGFsc28gZ3JlYXRseSByZWR1Y2VzIHRoZSBu
dW1iZXIgb2YgZmFpbGVkIEJBUiBtZXNzYWdlcyBpbg0KZG1lc2cgd2hlbiBMaW51eCBhc3NpZ25z
IHJlc291cmNlcy4NCg0KU2lnbmVkLW9mZi1ieTogTmljaG9sYXMgSm9obnNvbiA8bmljaG9sYXMu
am9obnNvbi1vcGVuc291cmNlQG91dGxvb2suY29tLmF1Pg0KLS0tDQogZHJpdmVycy9wY2kvc2V0
dXAtYnVzLmMgfCAyOSArKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLQ0KIDEgZmlsZSBjaGFu
Z2VkLCAxOSBpbnNlcnRpb25zKCspLCAxMCBkZWxldGlvbnMoLSkNCg0KZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvcGNpL3NldHVwLWJ1cy5jIGIvZHJpdmVycy9wY2kvc2V0dXAtYnVzLmMNCmluZGV4IDU2
NzUyNTRmYS4uOGUxYmM3ZWU3IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9wY2kvc2V0dXAtYnVzLmMN
CisrKyBiL2RyaXZlcnMvcGNpL3NldHVwLWJ1cy5jDQpAQCAtNzUyLDEzICs3NTIsMTggQEAgc3Rh
dGljIHZvaWQgcGNpX2JyaWRnZV9jaGVja19yYW5nZXMoc3RydWN0IHBjaV9idXMgKmJ1cykNCiB9
DQogDQogLyoNCi0gKiBIZWxwZXIgZnVuY3Rpb24gZm9yIHNpemluZyByb3V0aW5lczogZmluZCBm
aXJzdCBhdmFpbGFibGUgYnVzIHJlc291cmNlDQotICogb2YgYSBnaXZlbiB0eXBlLiAgTm90ZTog
d2UgaW50ZW50aW9uYWxseSBza2lwIHRoZSBidXMgcmVzb3VyY2VzIHdoaWNoDQotICogaGF2ZSBh
bHJlYWR5IGJlZW4gYXNzaWduZWQgKHRoYXQgaXMsIGhhdmUgbm9uLU5VTEwgcGFyZW50IHJlc291
cmNlKS4NCisgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIHNpemluZyByb3V0aW5lczogZmluZCBmaXJz
dCBidXMgcmVzb3VyY2Ugb2YgYSBnaXZlbg0KKyAqIHR5cGUuIE5vdGU6IHdlIGRvIG5vdCBza2lw
IHRoZSBidXMgcmVzb3VyY2VzIHdoaWNoIGhhdmUgYWxyZWFkeSBiZWVuDQorICogYXNzaWduZWQg
KHItPnBhcmVudCAhPSBOVUxMKS4gVGhpcyBpcyBiZWNhdXNlIGEgcmVzb3VyY2UgdGhhdCBpcyBh
bHJlYWR5DQorICogYXNzaWduZWQgKG5vdGhpbmcgbW9yZSB0byBiZSBkb25lKSB3aWxsIGJlIGlu
ZGlzdGluZ3Vpc2hhYmxlIGZyb20gb25lIHRoYXQNCisgKiBmYWlsZWQgZHVlIHRvIGxhY2sgb2Yg
c3BhY2UgaWYgd2Ugc2tpcCBhc3NpZ25lZCByZXNvdXJjZXMuIElmIHRoZSBjYWxsZXINCisgKiBm
dW5jdGlvbiBjYW5ub3QgdGVsbCB0aGUgZGlmZmVyZW5jZSB0aGVuIGl0IG1pZ2h0IHRyeSB0byBw
bGFjZSB0aGUNCisgKiByZXNvdXJjZXMgaW4gYSBkaWZmZXJlbnQgd2luZG93LCBkb3VibGluZyB1
cCBvbiByZXNvdXJjZXMgb3IgY2F1c2luZw0KKyAqIHVuZm9yZXNlZWFibGUgaXNzdWVzLg0KICAq
Lw0KLXN0YXRpYyBzdHJ1Y3QgcmVzb3VyY2UgKmZpbmRfZnJlZV9idXNfcmVzb3VyY2Uoc3RydWN0
IHBjaV9idXMgKmJ1cywNCi0JCQkJCSAgICAgICB1bnNpZ25lZCBsb25nIHR5cGVfbWFzaywNCi0J
CQkJCSAgICAgICB1bnNpZ25lZCBsb25nIHR5cGUpDQorc3RydWN0IHJlc291cmNlICpmaW5kX2J1
c19yZXNvdXJjZV9vZl90eXBlKHN0cnVjdCBwY2lfYnVzICpidXMsDQorCQkJCQkJICB1bnNpZ25l
ZCBsb25nIHR5cGVfbWFzaywNCisJCQkJCQkgIHVuc2lnbmVkIGxvbmcgdHlwZSkNCiB7DQogCWlu
dCBpOw0KIAlzdHJ1Y3QgcmVzb3VyY2UgKnI7DQpAQCAtNzY2LDcgKzc3MSw3IEBAIHN0YXRpYyBz
dHJ1Y3QgcmVzb3VyY2UgKmZpbmRfZnJlZV9idXNfcmVzb3VyY2Uoc3RydWN0IHBjaV9idXMgKmJ1
cywNCiAJcGNpX2J1c19mb3JfZWFjaF9yZXNvdXJjZShidXMsIHIsIGkpIHsNCiAJCWlmIChyID09
ICZpb3BvcnRfcmVzb3VyY2UgfHwgciA9PSAmaW9tZW1fcmVzb3VyY2UpDQogCQkJY29udGludWU7
DQotCQlpZiAociAmJiAoci0+ZmxhZ3MgJiB0eXBlX21hc2spID09IHR5cGUgJiYgIXItPnBhcmVu
dCkNCisJCWlmIChyICYmIChyLT5mbGFncyAmIHR5cGVfbWFzaykgPT0gdHlwZSkNCiAJCQlyZXR1
cm4gcjsNCiAJfQ0KIAlyZXR1cm4gTlVMTDsNCkBAIC04NjYsMTQgKzg3MSwxNiBAQCBzdGF0aWMg
dm9pZCBwYnVzX3NpemVfaW8oc3RydWN0IHBjaV9idXMgKmJ1cywgcmVzb3VyY2Vfc2l6ZV90IG1p
bl9zaXplLA0KIAkJCSBzdHJ1Y3QgbGlzdF9oZWFkICpyZWFsbG9jX2hlYWQpDQogew0KIAlzdHJ1
Y3QgcGNpX2RldiAqZGV2Ow0KLQlzdHJ1Y3QgcmVzb3VyY2UgKmJfcmVzID0gZmluZF9mcmVlX2J1
c19yZXNvdXJjZShidXMsIElPUkVTT1VSQ0VfSU8sDQotCQkJCQkJCUlPUkVTT1VSQ0VfSU8pOw0K
KwlzdHJ1Y3QgcmVzb3VyY2UgKmJfcmVzID0gZmluZF9idXNfcmVzb3VyY2Vfb2ZfdHlwZShidXMs
IElPUkVTT1VSQ0VfSU8sDQorCQkJCQlJT1JFU09VUkNFX0lPKTsNCiAJcmVzb3VyY2Vfc2l6ZV90
IHNpemUgPSAwLCBzaXplMCA9IDAsIHNpemUxID0gMDsNCiAJcmVzb3VyY2Vfc2l6ZV90IGNoaWxk
cmVuX2FkZF9zaXplID0gMDsNCiAJcmVzb3VyY2Vfc2l6ZV90IG1pbl9hbGlnbiwgYWxpZ247DQog
DQogCWlmICghYl9yZXMpDQogCQlyZXR1cm47DQorCWlmIChiX3Jlcy0+cGFyZW50KQ0KKwkJcmV0
dXJuOw0KIA0KIAltaW5fYWxpZ24gPSB3aW5kb3dfYWxpZ25tZW50KGJ1cywgSU9SRVNPVVJDRV9J
Tyk7DQogCWxpc3RfZm9yX2VhY2hfZW50cnkoZGV2LCAmYnVzLT5kZXZpY2VzLCBidXNfbGlzdCkg
ew0KQEAgLTk3OCw3ICs5ODUsNyBAQCBzdGF0aWMgaW50IHBidXNfc2l6ZV9tZW0oc3RydWN0IHBj
aV9idXMgKmJ1cywgdW5zaWduZWQgbG9uZyBtYXNrLA0KIAlyZXNvdXJjZV9zaXplX3QgbWluX2Fs
aWduLCBhbGlnbiwgc2l6ZSwgc2l6ZTAsIHNpemUxOw0KIAlyZXNvdXJjZV9zaXplX3QgYWxpZ25z
WzE4XTsgLyogQWxpZ25tZW50cyBmcm9tIDFNQiB0byAxMjhHQiAqLw0KIAlpbnQgb3JkZXIsIG1h
eF9vcmRlcjsNCi0Jc3RydWN0IHJlc291cmNlICpiX3JlcyA9IGZpbmRfZnJlZV9idXNfcmVzb3Vy
Y2UoYnVzLA0KKwlzdHJ1Y3QgcmVzb3VyY2UgKmJfcmVzID0gZmluZF9idXNfcmVzb3VyY2Vfb2Zf
dHlwZShidXMsDQogCQkJCQltYXNrIHwgSU9SRVNPVVJDRV9QUkVGRVRDSCwgdHlwZSk7DQogCXJl
c291cmNlX3NpemVfdCBjaGlsZHJlbl9hZGRfc2l6ZSA9IDA7DQogCXJlc291cmNlX3NpemVfdCBj
aGlsZHJlbl9hZGRfYWxpZ24gPSAwOw0KQEAgLTk4Niw2ICs5OTMsOCBAQCBzdGF0aWMgaW50IHBi
dXNfc2l6ZV9tZW0oc3RydWN0IHBjaV9idXMgKmJ1cywgdW5zaWduZWQgbG9uZyBtYXNrLA0KIA0K
IAlpZiAoIWJfcmVzKQ0KIAkJcmV0dXJuIC1FTk9TUEM7DQorCWlmIChiX3Jlcy0+cGFyZW50KQ0K
KwkJcmV0dXJuIDA7DQogDQogCW1lbXNldChhbGlnbnMsIDAsIHNpemVvZihhbGlnbnMpKTsNCiAJ
bWF4X29yZGVyID0gMDsNCi0tIA0KMi4yMC4xDQoNCg==
